#!/usr/bin/env bash
# Script: data_extraction_automation-0x01
# Objective: Extract name, height, weight, and type from data.json (Pikachu)
# Tools allowed: jq, awk, sed

# Check if the JSON file exists
if [ ! -f "data.json" ]; then
  echo "❌ data.json not found. Please run the previous script first."
  exit 1
fi

# Extract the required fields using jq
name=$(jq -r '.name' data.json)
height=$(jq -r '.height' data.json)
weight=$(jq -r '.weight' data.json)
type=$(jq -r '.types[0].type.name' data.json)

# Convert values for human readability
# Pokémon API height is in decimetres (1 dm = 0.1 m)
# Pokémon API weight is in hectograms (1 hg = 0.1 kg)
height_m=$(awk "BEGIN { printf \"%.1f\", $height / 10 }")
weight_kg=$(awk "BEGIN { printf \"%.1f\", $weight / 10 }")

# Capitalize name and type using sed
name_cap=$(echo "$name" | sed 's/.*/\u&/')
type_cap=$(echo "$type" | sed 's/.*/\u&/')

# Print final formatted output
echo "$name_cap is of type $type_cap, weighs ${weight_kg}kg, and is ${height_m}m tall."
